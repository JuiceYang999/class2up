(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fbd0c7d"],{"3f90":function(e,t,a){"use strict";a("d415")},5444:function(e,t,a){},8306:function(e,t,a){"use strict";var n=a("7a23"),c={class:"file-config config"},o=Object(n["createElementVNode"])("div",{class:"create-form-title"},"ACL File",-1),r={class:"viewer-container",ref:"monacoContainer"};function l(e,t,a,l,i,u){var s=Object(n["resolveComponent"])("monaco"),d=Object(n["resolveComponent"])("el-form-item"),b=Object(n["resolveComponent"])("el-col"),f=Object(n["resolveComponent"])("el-row"),p=Object(n["resolveComponent"])("el-form");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",c,[o,Object(n["createVNode"])(p,{class:"create-form",ref:"formCom",rules:e.rules,model:e.fileConfig,"label-position":"top"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(f,{gutter:20},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(b,{span:24},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(d,{prop:"rules",required:""},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",r,[Object(n["createVNode"])(s,{id:"acl-file-editor",modelValue:e.fileConfig.rules,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.fileConfig.rules=t}),lang:"plaintext"},null,8,["modelValue"])],512)]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["rules","model"])])}var i=a("9146"),u=a("4655"),s=a("2ef0"),d=Object(n["defineComponent"])({name:"FileConfig",components:{Monaco:i["a"]},props:{modelValue:{type:Object,required:!0}},setup:function(e,t){var a=Object(n["ref"])(e.modelValue),c=Object(u["a"])(),o=c.createRequiredRule,r=Object(n["ref"])(),l={rules:o("ACL File")},i=function(){return r.value.validate()};return Object(n["watch"])(a.value,(function(e){t.emit("update:modelValue",e)})),Object(n["watch"])((function(){return e.modelValue}),(function(e){Object(s["isEqual"])(e,a.value)||(a.value=e)})),{fileConfig:a,formCom:r,rules:l,validate:i}}}),b=(a("ffd1"),a("6b0d")),f=a.n(b);const p=f()(d,[["render",l]]);t["a"]=p},d415:function(e,t,a){},da02:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("0122"),c=(a("e9c4"),a("2ef0")),o=a.n(c),r=a("a54e"),l=a("649f");function i(){var e=Object(l["a"])(),t=e.createSSLForm,a=e.handleSSLDataBeforeSubmit,c=function(){return{rules:'{allow, {username, "dashboard"}, subscribe, ["$SYS/#"]}.\n{allow, {ipaddr, "127.0.0.1"}, all, ["$SYS/#", "#"]}.\n{deny, all, subscribe, ["$SYS/#", {eq, "#"}]}.'}},i=function(){return{server:"",username:"root",password:"",database:"",pool_size:8,auto_reconnect:!0,ssl:t(),query:""}},u=function(){return{method:"post",url:"http://127.0.0.1:8080",headers:{"content-type":"application/json"},body:JSON.stringify({username:"${username}"},null,2),pool_size:8,connect_timeout:"5s",request_timeout:"5s",enable_pipelining:100,ssl:t()}},s=function(){return{mongo_type:"single",server:"127.0.0.1:27017",servers:"127.0.0.1:27017,127.0.0.2:27017",database:"mqtt",collection:"users",filter:"",r_mode:"master",w_mode:"safe",pool_size:8,ssl:t(),topology:{connect_timeout_ms:"20s"}}},d=function(){return{server:"127.0.0.1:6379",servers:"127.0.0.1:6379,127.0.0.2:6379,127.0.0.3:6379",sentinel:"mysentinel",redis_type:"single",database:0,auto_reconnect:!0,password:"",pool_size:8,cmd:"",ssl:t()}},b=function(e){switch(e){case"file":return c();case"mysql":return i();case"postgresql":return i();case"http":return u();case"mongodb":return s();case"redis":return d();case"built_in_database":return{}}},f=Object(r["a"])(),p=f.processHttpConfig,m=f.processMongoDBConfig,j=f.processRedisConfig,O=function(e,t){var c={};switch(t){case"http":c=p(e);break;case"mongodb":c=m(e);break;case"redis":c=j(e);break;default:c=o.a.cloneDeep(e);break}return c.type=t,c.ssl&&"object"===Object(n["a"])(c.ssl)&&(c.ssl=a(c.ssl)),c};return{factory:b,create:O}}},f33c:function(e,t,a){"use strict";a.r(t);a("caad"),a("2532");var n=a("7a23"),c={class:"auth authz-create app-wrapper"},o={key:0,class:"create-form"},r=["src","alt"],l={class:"step-btn"},i={key:1},u={key:2,class:"item-description"},s={class:"step-btn"};function d(e,t,a,d,b,f){var p=Object(n["resolveComponent"])("detail-header"),m=Object(n["resolveComponent"])("guide-bar"),j=Object(n["resolveComponent"])("el-radio"),O=Object(n["resolveComponent"])("el-badge"),v=Object(n["resolveComponent"])("el-radio-group"),g=Object(n["resolveComponent"])("el-button"),h=Object(n["resolveComponent"])("file-config"),C=Object(n["resolveComponent"])("http-config"),k=Object(n["resolveComponent"])("database-config"),y=Object(n["resolveComponent"])("el-card");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",c,[Object(n["createVNode"])(p,{item:{name:e.$t("Auth.createAuthz"),path:"/authorization"}},null,8,["item"]),Object(n["createVNode"])(y,{class:"app-card"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(m,{"guide-list":e.getGuideList(),"active-guide-index-list":e.activeGuidesIndex,"desc-list":e.guideDescList},null,8,["guide-list","active-guide-index-list","desc-list"]),0===e.step?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",o,[Object(n["createVNode"])(v,{modelValue:e.type,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.type=t}),size:"large"},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.typeList,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])(O,{key:t.value,value:e.$t("Base.added"),class:"item",hidden:!e.addedAuthz.includes(t.value)},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(),Object(n["createBlock"])(j,{key:t.value,label:t.value,class:"backend",border:"",disabled:e.addedAuthz.includes(t.value)},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("img",{height:"32",width:"32",src:t.img,alt:t.label},null,8,r),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(t.label),1)]})),_:2},1032,["label","disabled"]))]})),_:2},1032,["value","hidden"])})),128))]})),_:1},8,["modelValue"]),Object(n["createElementVNode"])("div",l,[Object(n["createVNode"])(g,{onClick:t[1]||(t[1]=function(t){return e.$router.push("/authorization")})},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("Base.cancel")),1)]})),_:1}),Object(n["createVNode"])(g,{type:"primary",onClick:e.handleNext},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("Base.nextStep")),1)]})),_:1},8,["onClick"])])])):Object(n["createCommentVNode"])("",!0),1===e.step?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",i,["file"===e.type?(Object(n["openBlock"])(),Object(n["createBlock"])(h,{key:0,ref:"formCom",modelValue:e.configData,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.configData=t})},null,8,["modelValue"])):"http"===e.type?(Object(n["openBlock"])(),Object(n["createBlock"])(C,{key:1,ref:"formCom","auth-type":"authz",modelValue:e.configData,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.configData=t})},null,8,["modelValue"])):"built_in_database"===e.type?(Object(n["openBlock"])(),Object(n["createElementBlock"])("p",u,Object(n["toDisplayString"])(e.$t("Auth.builtInDatabaseDesc")),1)):["mysql","postgresql","mongodb","redis"].includes(e.type)?(Object(n["openBlock"])(),Object(n["createBlock"])(k,{key:3,ref:"formCom",modelValue:e.configData,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.configData=t}),database:e.type,"auth-type":"authz"},null,8,["modelValue","database"])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",s,[Object(n["createVNode"])(g,{onClick:e.handleBack},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("Base.backStep")),1)]})),_:1},8,["onClick"]),Object(n["createVNode"])(g,{type:"primary",onClick:e.handleCreate,loading:e.saveLoading},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("Base.create")),1)]})),_:1},8,["onClick","loading"])])])):Object(n["createCommentVNode"])("",!0)]})),_:1})])}var b=a("c964"),f=(a("96cf"),a("8306")),p=a("f2c0"),m=a("454f"),j=a("0d47"),O=a("ba87"),v=a("6611"),g=a("9baa"),h=a("da02"),C=a("3ef4"),k=a("47e2"),y=a("6c02"),V=a("4c61"),B=a("d4fb"),_=Object(n["defineComponent"])({name:"AuthzCreate",components:{DetailHeader:j["a"],GuideBar:O["a"],FileConfig:f["a"],DatabaseConfig:p["a"],HttpConfig:m["a"]},setup:function(){var e=Object(k["b"])(),t=e.t,c=Object(y["f"])(),o=function(){return[t("Auth.dataSource"),t("Auth.config")]},r=Object(n["ref"])("file"),l=Object(n["ref"])({}),i=Object(n["ref"])(!1),u=Object(n["ref"])(),s=Object(h["a"])(),d=s.factory,f=s.create,p=Object(n["ref"])([{label:"File",value:"file",img:a("eb1a")},{label:"Built-in Database",value:"built_in_database",img:a("162d")},{label:"MySQL",value:"mysql",img:a("e9c2")},{label:"MongoDB",value:"mongodb",img:a("9c9a")},{label:"PostgreSQL",value:"postgresql",img:a("22e1")},{label:"Redis",value:"redis",img:a("f7e5")},{label:"HTTP Server",value:"http",img:a("e5f1")}]),m=Object(B["a"])(),j=m.titleMap,O=Object(v["a"])((function(){if(0===_.value){var e=d(r.value);l.value=e,S.value.push(j[r.value])}})),_=O.step,w=O.activeGuidesIndex,x=O.handleNext,N=O.handleBack,S=O.guideDescList,D=Object(n["computed"])((function(){return JSON.parse(sessionStorage.getItem("addedAuthz"))||[]})),z=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){var a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=!0,"built_in_database"===r.value){e.next=4;break}return e.next=4,u.value.validate().catch((function(){a=!1,Object(V["t"])()}));case 4:if(a){e.next=6;break}return e.abrupt("return");case 6:return i.value=!0,n=Object(V["c"])(f(l.value,r.value)),e.next=10,Object(g["d"])(n).catch((function(){i.value=!1}));case 10:o=e.sent,o&&(C["a"].success(t("Base.createSuccess")),c.push({name:"authorization"}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{saveLoading:i,configData:l,step:_,type:r,guideDescList:S,typeList:p,activeGuidesIndex:w,addedAuthz:D,formCom:u,handleNext:x,handleBack:N,handleCreate:z,getGuideList:o}}}),w=(a("3f90"),a("6b0d")),x=a.n(w);const N=x()(_,[["render",d]]);t["default"]=N},ffd1:function(e,t,a){"use strict";a("5444")}}]);